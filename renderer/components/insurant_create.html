<div>
    <form action="javascript:void(0)" method="POST" id="ins">
        <div class="row">
            <div class="col-12">
                <label for="">Резидент</label>
                <label class="form-check-label">Да</label>
                <input type="radio" class="form-check-input" name="TB_REZIDENT" value="1" id="TB_REZIDENT_ON">
                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <label class="form-check-label">Нет</label>
                <input type="radio" class="form-check-input" name="TB_REZIDENT" value="0" id="TB_REZIDENT_OFF">
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <label for="">Паспорт серия</label><br>
                <input class="form-control" name="TB_PASPSERY" id="TB_PASPSERY" type="text" maxlength="2" style="width:50px;display:inline;text-transform: uppercase;">
                <input class="form-control" name="TB_PASPNUMBER" id="TB_PASPNUMBER" type="number" maxlength="7">
            </div>
            <div class="col-3" id="PINFL">
                <label for="">ПИНФЛ</label>
                <input class="form-control" name="TB_PINFL" id="TB_PINFL" type="text" maxlength="14" minlength="14">
            </div>
            <div class="col-3">
                <label for="">Паспорт,кем выдан</label>
                <input class="form-control" name="TB_PASPVIDAN" id="TB_PASPVIDAN" type="text" >
            </div>
            <div class="col-3">
                <label for="">Когда выдан</label>
                <input class="form-control" name="TB_PASPDATE" id="TB_PASPDATE" type="date">
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <label for="">Фамилия</label><br>
                <input class="form-control" name="TB_SURNAME" id="TB_SURNAME" type="text">
            </div>
            <div class="col-3">
                <label for="">Имя</label><br>
                <input class="form-control" name="TB_NAME" id="TB_NAME" type="text">
            </div>
            <div class="col-3">
                <label for="">Отчество</label><br>
                <input class="form-control" name="TB_PATRONYM" id="TB_PATRONYM" type="text">
            </div>
            <div class="col-md-3"></div>
        </div>
        <div class="row">
            <div class="col-3">
                <label for="">Пол</label>
                <select name="TB_SEX" id="TB_SEX" class="form-control">
                    <option value="1">Муж</option>
                    <option value="0">Жен</option>
                </select>
            </div>
            <div class="col-3">
                <label for="">Дата рождения</label>
                <input class="form-control" name="TB_DATEBIRTH" id="TB_DATEBIRTH" type="date">
            </div>
            <div class="col-3">
                <label for="">Вод. права</label><br>
                <input class="form-control" name="TB_PRAVA_SERY" id="TB_PRAVA_SERY" type="text" style="width:50px;display:inline-block;text-transform: uppercase;" maxlength="2">
                <input class="form-control" name="TB_PRAVA_NUMBER" id="TB_PRAVA_NUMBER" type="number" style="width:initial;display:inline-block;" maxlength="6">
            </div>
            <div class="col-3">
                <label for="">от</label><br>
                <input class="form-control" name="TB_PRAVA_DATE" id="TB_PRAVA_DATE" type="date">
            </div>
        </div>
        <div class="row">
            <div class="col-3 form-check">
                <label class="form-check-label">ЧП</label>
                &nbsp;
                <input name="TB_CHP" type="checkbox" class="form-check-input" value="1">
            </div>
            <div class="col-3">
                <label for="">Удоств.предп</label>
                <input class="form-control" name="TB_CERTIFICATE" id="TB_CERTIFICATE" type="text">
            </div>
            <div class="col-3">
                <label for="">Дата выдачи</label>
                <input class="form-control" name="TB_CERT_BEGIN" id="TB_CERT_BEGIN" type="date">
            </div>
            <div class="col-3">
                <label for="">Дата окончания</label>
                <input class="form-control" name="TB_CERT_END" id="TB_CERT_END" type="date">
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <label for="">Страна</label>
                <input class="form-control" name="TB_COUNTRY" id="TB_COUNTRY" type="text">
            </div>
            <div class="col-3">
                <label for="">Область</label>
                <input class="form-control" name="TB_OBLAST" id="TB_OBLAST" type="text">
            </div>
            <div class="col-3">
                <label for="">Район/Город</label>
                <input class="form-control" name="TB_RAYON" id="TB_RAYON" type="text">
            </div>
            <div class="col-3"></div>
        </div>
        <div class="row">
            <div class="col-3">
                <label for="">Улица/квартал</label><br>
                <input class="form-control" name="TB_ULICA" id="TB_ULICA" type="text">
            </div>
            <div class="col-3">
                <label for="">Дом</label><br>
                <input class="form-control" name="TB_DOM" id="TB_DOM" type="text">
            </div>
            <div class="col-3">
                <label for="">Квартира</label><br>
                <input class="form-control" name="TB_KV" id="TB_KV"  type=" text">
            </div>
            <div class="col-3">
                <label for="">E-mail</label><br>
                <input class="form-control" name="TB_EMAIL" id="TB_EMAIL"  type="email">
            </div>
        </div>
        <div class="row">
            <div class="col-3">
                <label for="">Сайт</label><br>
                <input class="form-control" id="TB_SITE" name="TB_SITE" type="text">
            </div>
            <div class="col-3">
                <label for="">Почтовый индекс</label>
                <input class="form-control" id="TB_POCHTA" name="TB_POCHTA" type="text">
            </div>
            <div class="col-3">
                <label for="">Телефон 1</label>
                <input class="form-control phone" id="TB_PHONE1" name="TB_PHONE1" type="text" maxlength="13">
            </div>
            <div class="col-3">
                <label for="">Телефон 2</label>
                <input class="form-control phone" id="TB_PHONE2" name="TB_PHONE2" type="tel" maxlength="13">
            </div>
        </div>
        <div class="row">
            <div class="col-12">
                <label for="">Факс</label><br>
                <input class="form-control phone" id="TB_FAX" name="TB_FAX" type="text">
            </div>
        </div>
        <button class="btn btn-success pull-right" type="submit" id="submitter_button">Сохранить</button>
    </form>

    <script src="../../assets/stepper/js/jquery-2.2.4.min.js" type="text/javascript"></script>
</div>
<script>
    const { ipcRenderer } = require('electron');
    const submit_button = document.getElementById("submitter_button");
    const rezident_on=document.getElementById("TB_REZIDENT_ON");
    const rezident_off=document.getElementById("TB_REZIDENT_OFF");
    const TB_PASPSERY=document.getElementById("TB_PASPSERY");
    const TB_PASPNUMBER=document.getElementById("TB_PASPNUMBER");
    const TB_PRAVA_SERY=document.getElementById("TB_PRAVA_SERY");
    const TB_PRAVA_NUMBER=document.getElementById("TB_PRAVA_NUMBER");
    const phones=document.getElementsByClassName("phone");

    for(let i=0;i<phones.length;i++){
        phones[i].addEventListener("keypress", function(event){
            return phone_validate(event);
        })
    }
    rezident_on.addEventListener("change", function(e){
        document.getElementById("PINFL").style.display="block";
        document.getElementById("TB_PINFL").style.display="block";
    });
    rezident_off.addEventListener("change", function(e){
        document.getElementById("PINFL").style.display="none";
        document.getElementById("TB_PINFL").style.display="none";
    })

    submit_button.addEventListener("click", function (e) {
        e.preventDefault()
        getFormData()
    });

    TB_PASPSERY.addEventListener("keyup", function(){
        if(TB_PASPSERY.value.length==2){
            TB_PASPNUMBER.focus();
        }
    });
    TB_PRAVA_SERY.addEventListener("keyup", function(){
        if(TB_PRAVA_SERY.value.length==2){
            TB_PRAVA_NUMBER.focus();
        }
    });
    var user_id;
    function getFormData() {
        if(!validate()){
            return false;
        }
        const myform = new FormData(document.querySelector('form#ins'))
        var object = {};
        myform.forEach(function (value, key) {
            object[key] = value;
        });
        console.log(object)
        ipcRenderer.send("insurant_create", object)
        $("#insurant_modal").modal('hide');
    }
    function validate(){
        let form=document.getElementById("ins");
        let inputs=form.getElementsByTagName("input");

        for(let i=0;i<inputs.length;i++){
            if(inputs[i].value===""&&inputs[i].style.display!="none"){
                alert("Пожалуйста, заполните все поля");
                return false;
            }
        }
        return true;
    }
    function phone_validate(evt){
        var charCode = (evt.which) ? evt.which : evt.keyCode
        if ((charCode >= 48 && charCode <= 57)||evt.key=="+")
            return true
        evt.preventDefault();
    }
</script>